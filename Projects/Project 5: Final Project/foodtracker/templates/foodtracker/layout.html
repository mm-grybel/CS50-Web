{% load static %}

<!DOCTYPE html>
<html lang='en'>
    <head>
        <meta charset='utf-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
        <title>{% block title %}CS50W Food Tracker{% endblock %}</title>
        <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css' integrity='sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh' crossorigin='anonymous'>
        <link href='https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css' rel='stylesheet' />
        <link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css' rel='stylesheet' />
        <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css' rel='stylesheet' referrerpolicy='no-referrer'>

        <link href="{% static 'foodtracker/css/styles.css' %}" rel='stylesheet'>
    </head>

    <body class='sb-nav-fixed'>
        <nav class='sb-topnav navbar navbar-expand navbar-custom bg-custom'>
            <!-- Navbar Brand-->
            <a class='navbar-brand ps-3' href="{% url 'index' %}">CS50W Food Tracker</a>

            <div class='collapse navbar-collapse' id='navbarSupportedContent'>
                <ul class='navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4'>
                    <li class='nav-item'>
                        <a class='nav-link' href="{% url 'index' %}">
                            <i class='fas fa-list'></i> Food List
                        </a>
                    </li>

                    {% if user.is_authenticated %}
                        <li class='nav-item'>
                            <a class='nav-link' href="{% url 'food_add' %}">
                                <i class='far fa-plus-square'></i> Add Food Item
                            </a>
                        </li>
                        <li class='nav-item'>
                            <a class='nav-link' href="{% url 'food_log' %}">
                                <i class='fas fa-utensils'></i> Food Log
                            </a>
                        </li>
                    {% endif %}
                </ul>

            <!-- Navbar -->
            <ul class='navbar-nav ms-auto ms-md-0 me-3 me-lg-4'>
                {% if user.is_authenticated %}

                <li class='nav-item dropdown'>
                    <a class='nav-link dropdown-toggle' id='navbarDropdown' href='#' role='button' data-bs-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                        <i class='fas fa-user fa-fw'></i>
                    </a>
                    <ul class='dropdown-menu dropdown-menu-end' aria-labelledby='navbarDropdown'>
                            <li><a class='dropdown-item' href="{% url 'weight_log' %}">
                                <i class='fas fa-user'></i> User Profile
                            </a></li>
                            <li><hr class='dropdown-divider'></li>
                            <li><a class='dropdown-item' href="{% url 'logout' %}">
                                <i class='fas fa-sign-out-alt'></i> Log Out
                            </a></li>
                    </ul>
                </li>

                {% else %}
                <li class='nav-item'>
                    <a class='nav-link' href="{% url 'login' %}">
                        <i class='fas fa-sign-in-alt'></i> Log In
                    </a>
                </li>
                <li class='nav-item'>
                    <a class='nav-link' href="{% url 'register' %}">
                        <i class='fas fa-user-plus'></i> Register
                    </a>
                </li>
                            
                {% endif %}
                   
            </ul>
        </nav>

        <div id='layoutSidenav'>
            <div id='layoutSidenav_nav'>
                <nav class='sb-sidenav accordion sb-sidenav-custom' id='sidenavAccordion'>
                    
                    <hr class='sidebar-divider'>
                    
                    <div class='sb-sidenav-menu'>

                        {% block categories %}
                        {% endblock %}

                    </div>

                    <hr class='sidebar-divider'>

                    <div class='sb-sidenav-footer'>
                        {% if user.is_authenticated %}
                            <div class='small'>Signed in as:</div>
                            {{ user.username }}
                        {% else %}
                            Not signed in.
                        {% endif %}
                    </div>

                </nav>
            </div>
            <div id='layoutSidenav_content'>
                <main>
                
                    {% block body %}
                    {% endblock %}

                </main>

                <footer class='py-4 bg-light mt-auto'>
                    <div class='container-fluid px-4'>
                        <div class='d-flex align-items-center justify-content-center'>
                            <div class='text-center'>Copyright &copy; CS50W Food Tracker</div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>

        {% block script %}
            <script src='https://code.jquery.com/jquery-3.3.1.slim.min.js' integrity='sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo' crossorigin='anonymous'></script>
            <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js' integrity='sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1' crossorigin='anonymous'></script>
            <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js' integrity='sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM' crossorigin='anonymous'></script>
            <script src='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js' crossorigin='anonymous'></script>
            <script src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js' crossorigin='anonymous'></script>
        {% endblock %}

    </body>
</html>